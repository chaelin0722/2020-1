### Algorithm 0717

<hr>



## 검색트리



#### 레코드 

- 개체에 대해 수집된 모든 정보를 포함하고 있는 저장 단위

> ex) 사람의 레코드 : 주민번호, 이름 집주소, 집 번호, 직정 번호 등



#### 필드 

-  레코드에서 각각의 정보를 나타내는 부분



#### 검색키 또는 키

- 다른 레코드와 중복되지 않도록 각 레코드를 대표할 수 있는 필드

- 하나 혹은 복수의 필드로 이루어질 수 있다.



#### 검색 트리 

- 각 노드가 규칙에 맞도록 하나씩의 키를 갖고 있다.

- 이를 통해 해당 레코드가 저장된 위치를 알 수 있다.





### 이진 검색 트리 (binary search tree)

특징 :

- 트리의 각 노드는 키값을 하나씩 갖는다. 각 노드의 키 값은 모두 다르다
- 최상위 레벨에 루트 노드가 있고, 각 노드는 최대 두 개의 자식 노드를 갖는다.
- 임의의 노드의 키 값은 자신의 왼쪽에 있는 모든 노드의 키 값보다 크고, 오른쪽에 있는 모든 노드의 키 값보다 작다.



bts  검색에서 실패. 성공하는 경우

- 성공 

  > 검색이 말단 노드까지 가지 않고, 중간에 어떤 노드 r의 키 값이 x와 같아지는 순간 r을 리턴하고 종료

- 실패

  > 검색이 루트 노드에서 leaf노드까지 진행된다. leaf노드는 자식이 없어 treeSearch(NIL,x)가 되어 NIL 리턴

== > 성공하면 중간에서 끝, 실패하면 트리의 말단까지 가고 NIL 리턴 끝



### 레드블랙트리



- 루트는 블랙
- 모든 리프는 블랙
- 노드가 레드면 그 노드의 자식은 블랙 반대의 경우는 상관 없다
- 루트노드에서 임의의 리프 노드에 이르는 경로에서 만나는 블랙노드의 수는 모두 같다.

​      => **어떤 경로로 가던!** 리프노드로 가는 보든 블랙 노드의 수는 같아야 한다는 것!

** 여기서 리프 노드는 일반적인 의미의 리프노드와 다르다!!!!!!!

모든 NIL 포인터가 NIL 이라는 리프 노드를 가리킨다고 가정한다. 



#### 삽입

노드를 삽입할 때, 이진 검색 트리의 삽입 알고리즘에 따라 삽입을 한 다음 새 노드의 색상을 레드로 색칠한다. 이 노드를 x 라 한다. x의 부모노드  p 가 블랙이면 삽입은 완료된다. 따라서 p 가 레드인 경우에만 조건을 붙여 해결해야 한다. 

p 가 레드인 경우 레드노드가 2개 연속으로 있게 되는 것이므로 레드블랙트리의 특성을 위반한다. 하지만 삽입 전, 레드 블랙 트리였으므로 p 의 부모인 p^2 은 반드시 블랙이다. 



따라서 2가지 경우에 따른다.  (p의 형제노드인 s에 따라) 

case 1 :  s 가 레드											 >  p와 s를 블랙으로 바꾸고 p^2 을 블랙에서 레드로 바꾼다.

case 2 :  s 가 블랙 이거나 NIL 일때

​			case 2-1 : x 가 p의 오른쪽 자식			> p를 중심으로 왼쪽 회전

​			case 2-2 : x 가 p의 왼쪽 자식				> p^2을 중심으로 오른쪽 회전 후 p 와 p^2 의 색을 바꿈



#### 삭제

기본적으로 이진 검색 트리에서 삭제방법에 따라 노드를 삭제한 후 색상을 맞춘다.

삭제할 노드의 자식이 없거나, 하개만을 가진 노드의 삭제에 국한해 설명해도 무방하다. 